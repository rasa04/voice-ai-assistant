# Copy to .env and adjust values if needed.
# run.sh will auto-create .env from this file on first run.

# LLM backend
# local => fully autonomous startup (no LM Studio needed)
# auto  => try local first, then fallback to LM Studio
VA_LLM_BACKEND=local

# LLM local (llama.cpp)
VA_LLM_MODEL_PATH=.cache/voice_assistant/models/llm/Qwen_Qwen3-4B-Instruct-2507-Q4_K_M.gguf
VA_LLM_MODEL_URL=https://huggingface.co/bartowski/Qwen_Qwen3-4B-Instruct-2507-GGUF/resolve/main/Qwen_Qwen3-4B-Instruct-2507-Q4_K_M.gguf
VA_LLM_CTX=4096
VA_LLM_THREADS=0
VA_LLM_GPU_LAYERS=-1
VA_LLM_MAX_TOKENS=384
VA_LLM_USE_MMAP=1
VA_LLM_USE_MLOCK=0

# LM Studio fallback (OpenAI-compatible endpoint)
LMSTUDIO_BASE_URL=http://localhost:1234/v1
LMSTUDIO_API_KEY=lm-studio
LMSTUDIO_MODEL=qwen/qwen3-4b-2507
VA_LM_TEMPERATURE=0.35
VA_LM_TIMEOUT_S=45
VA_HISTORY_TURNS=10

# STT (whisper.cpp via pywhispercpp)
VA_WHISPER_MODEL=medium
VA_WHISPER_LANG=ru
VA_WHISPER_THREADS=6
VA_STT_SAVE_UTTERANCES=0
VA_STT_DROP_NOISE_TAGS=1
VA_STT_NORMALIZE_TECH_TERMS=1
VA_STT_NO_CONTEXT=1
VA_STT_SUPPRESS_NON_SPEECH_TOKENS=1
VA_STT_NO_SPEECH_THOLD=0.7
VA_STT_INITIAL_PROMPT=Русская речь. Технические термины: PHP, JavaScript, C++, C#, SQL.
VA_STT_DROP_SUBTITLE_HALLUCINATIONS=1

# VAD / segmentation
VA_VAD_AGGR=2
VA_SPEECH_START_RATIO=0.6
VA_SPEECH_END_RATIO=0.8
VA_VAD_WINDOW_MS=300
VA_MIN_UTTERANCE_S=0.35
VA_MAX_UTTERANCE_S=15.0
VA_MIN_TEXT_CHARS=2
VA_DUPLICATE_UTT_WINDOW_S=2.2

# Audio capture
VA_SAMPLE_RATE=16000
VA_FRAME_MS=30
VA_INPUT_DEVICE=
# One-time helper: set to 1 to print input devices and exit.
# VA_LIST_AUDIO_DEVICES=1

# TTS (local)
VA_DISABLE_TTS=0
VA_TTS_BACKEND=piper
VA_TTS_LANG=ru
VA_TTS_VOICE=
VA_TTS_RATE=185
VA_TTS_STRIP_EMOJI=1
VA_TTS_STRIP_MARKDOWN=1
VA_TTS_MAX_CHARS=420
VA_TTS_PIPER_BIN=piper
VA_TTS_PIPER_MODEL=.cache/voice_assistant/models/piper/ru_RU-irina-medium.onnx
VA_TTS_PIPER_MODEL_URL=https://huggingface.co/rhasspy/piper-voices/resolve/main/ru/ru_RU/irina/medium/ru_RU-irina-medium.onnx
# Optional override (if not set, script uses VA_TTS_PIPER_MODEL_URL + .json):
# VA_TTS_PIPER_CONFIG_URL=https://.../ru_RU-irina-medium.onnx.json
# Suggested lightweight ru voices (Piper, .onnx):
# - ru_RU-irina-x_low.onnx   (~31.6 MB, fastest)
# - ru_RU-irina-medium.onnx  (~63.2 MB, better naturalness)
# - ru_RU-ruslan-medium.onnx (~63.2 MB, male voice)
# Anti-feedback: when 0, mic is ignored during TTS (prevents self-listening loop).
VA_ALLOW_BARGE_IN=0
# Extra mic suppression right after TTS end.
VA_TTS_ECHO_SUPPRESS_MS=900

# Misc
VA_CACHE_DIR=.cache/voice_assistant
VA_SKIP_PIP_SYNC=0
VA_FORCE_PIP_SYNC=0
